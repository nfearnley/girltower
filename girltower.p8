pico-8 cartridge // http://www.pico-8.com
version 29
__lua__
-- girl tower
-- by natalie fearnley

function _init()
  towers={}
  enemies={}
  t=tower:new()
  music(0)
end

function _update()
  if btnp(⬅️) and t.x > 0 then
    t.x-=1
  elseif btnp(➡️) and t.x < 15 then
   	t.x+=1
  end
  if btnp(⬆️) and t.y > 0 then
    t.y-=1
  elseif btnp(⬇️) and t.y < 15 then
   	t.y+=1
  end
  if btnp(🅾️) then
   t.p_one=(rnd(16))%16
   t.p_two=(rnd(16))%16
  end
  if btnp(❎) then
  	--add(towers, tower:new(t))
  	add(enemies, enemy:new())
  end
  for enem in all(enemies) do
   enem:update()
  end
end

function _draw()
  cls()
  map(0,0,0,0,16,16)
  t:draw()
  for tow in all(towers) do
   tow:draw()
  end
  for enem in all(enemies) do
   enem:draw()
  end
end

-->8
-- tower
tower = {}
tower.__index = tower

function tower:new(args)
 args = args or {}
 o = setmetatable({}, self)
 o.x = args.x or 0
 o.y = args.y or 0
 o.p_one = nildef(args.p_one, 8)
 o.p_two = nildef(args.p_two, 12)
 return o
end

function tower:draw()
	pal(8,self.p_one)
 pal(12,self.p_two)
 spr(4,self.x*8,self.y*8+1)
	pal()
end
-->8
-- enemy
path = {
 {x=5*8,y=15*8},
 {x=5*8,y=14*8},
 {x=9*8,y=14*8},
 {x=9*8,y=11*8},
 {x=3*8,y=11*8},
 {x=3*8,y=14*8},
 {x=1*8,y=14*8},
 {x=1*8,y=4*8},
 {x=3*8,y=4*8},
 {x=3*8,y=8*8},
 {x=8*8,y=8*8},
 {x=8*8,y=4*8},
 {x=5*8,y=4*8},
 {x=5*8,y=0*8}
}

enemy = {}
enemy.__index = enemy

function enemy:new(args)
 args = args or {}
 o = setmetatable({}, self)
 o.step = 1
 o.x = path[o.step].x
 o.y = path[o.step].y
 return o
end

function enemy:update()
 -- we've reached the castle
 if self.step == #path then
  return
 end
 goal=path[self.step+1]
 if (self.x < goal.x) self.x+=1
 if (self.x > goal.x) self.x-=1
 if (self.y < goal.y) self.y+=1
 if (self.y > goal.y) self.y-=1
 if (self.x == goal.x and self.y == goal.y) self.step+=1
end

function enemy:draw()
 spr(6,self.x,self.y)
end

-->8
-- utils
function nildef(val, def)
	if val~=nil then
	 return val
	else
	 return def
	end
end
__gfx__
0000000000000000000000000000000000855c00080c009000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000058ddc5080c0c90000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000555555555555555555000055dd55080ccc09000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770000005dddddddddddddddd500005d55d5008c0c90000006000000000000000000000000000000000000000000000000000000000000000000000000000
0007700000055555555555555555500005dddd5099980cc000006440000000000000000000000000000000000000000000000000000000000000000000000000
007007000005dddddddddddddddd500005dddd5009080cc000046400000000000000000000000000000000000000000000000000000000000000000000000000
000000000005dddddddddddddddd500005dddd5009080c0000040400000000000000000000000000000000000000000000000000000000000000000000000000
000000000005555555555555555550000005500009088cc000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000005555555555555555555500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000005dddddddddddddddddd500005555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000005dd555555dd555555dd500005dd5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000005dd5dddd5dd5dddd5dd500005dd5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000005dd5dddd5dd5dddd5dd500005dd5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000005dd555555dd555555dd500005dd5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000005dd500005dd500005dd500005dd5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000005dd500005dd500005dd500005dd5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000005dd555555dd555555dd500005dd5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000005dddddddddddddddddd500005dd5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000005dd555555dd555555dd500005dd5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000005dd5dddd5dd5dddd5dd500005dd5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000005dd5dddd5dd5dddd5dd500005dd5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000005dd555555dd555555dd500005dd5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000005dd500005dd500005dd500005dd5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000005dd500005dd500005dd500005dd5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000005dd555555dd555555dd500005555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000005dddddddddddddddddd500005dd5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000005555555555555555555500005dd5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000005dddddddddddddddddd500005555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000005dddddddddddddddddd500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000005555555555555555555500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0505050505050505050505000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1102020213001102020213000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2400000024002400000024000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2102020223003102021223000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2400000024000000002424000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2400140021030113002424000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2400240021020223002424000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2400240031030133002424000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2400240000000000002424000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2400210202020202023324000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2400210202020202020223000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2400240000000000000024000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2400240011020202130024000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2400340021020202330024000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2400000024000000000024000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3102020233000102020233000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000200001d150011500015000150181501815015100161000e1000c1000e1000e1001b1001b1001b1001b1001b1001a1001a1001a1001a1001a1001a1001a1001a10000100001000010000100001000010000100
00040000185501d5502a5000050000500005000050000500005000050000500005000050000500005000050000500005000050000500005000050000500005000050000500005000050000500005000050000500
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0117000000000000002b7102b7153271032710327103271530710307152e7102e7152d7102d7152b7102b7152971029710297102971029710297152b7102b7152e7102e7152d7102d7152b7102b7152971029715
01170000377103771037710377153271032710327103271530710307152e7102e7152d7102d7152b7102b7152971029710297102971029710297152b7102b7152e7102e7152d7102d7152b7102b7152971029715
011700002b7102b7102b7102b7152e7102e7102e7102e7152d7102d7102d7102d7152b7102b7102b7102b7152a7102a7102a7102a7102a7102a7102a7102a7150000000000000000000032715347153571035715
011700003471535715327103271530715327152e7102e7152d7152e7152b7102b715297152b71528710287152971029710297102971029710297152671528715297152b7152d7152e71530715327153471535715
011700003471034715327103271530710307152e7102e7152d7102d7152b7102b715297102971528710287152971029710297102971029710297152b7102b7152e7102e7152d7102d7152b7102b7152971029715
011700002b7102b7102b7102b7152e7102e7102e7102e7152d7102d7102d7102d7152b7102b7102b7102b7152a7102a7102a7102a71526715287152a7152b7152d7152b7152a715287152b7152a7152b71528715
011700002b7102b7102b7102b7152e7102e7102e7102e7152d7102d7152b7102b715297102971528710287152971029710297102971029710297152b7102b7152e7102e7152d7102d7152b7102b7152971029715
011700002b7102b7102b7102b7102b7102b7151f71521715227152471526715247152271524715267152871529715287152671528715297152b7152d7152e7152d7152b71529715287152b7152a7152b71528715
011700002b7152a7152b7152d7152e7152b7152d7152e7152d7152e7153071532715307152e7152d7152b7152971029710297102971029710297152671528715297152b7152d7152e71530715327153471535715
01170000347153571534715327153071532715307152e7152d7152e7152d7152b7152a7152b7152a715287152a7152871526715287152a7152b7152d7152e7152d7152b7152a715287152b7152a7152b71528715
011700002b7152a7152b7152d7152e7152b7152d7152e7152d7152e7152b7152d715297152b7152871028715297102971029710297152671528715297152b7152d7152b7152a715287152b7152a7152b71528715
011700002b7102b7102b7102b71532710327103271032715307103071030710307152e7102e7102e7102e7152d7102d7102d7102d715327153471536715377153971537715367153471537715367153771534715
0117001013710137101371013710137101371013710137151a7101a7101a7101a7101a7101a7101a7101a71500700007000070000700007000070000700007000070000700007000070000700007000070000700
01170010007001f7151a7151f715007001f7151a7151f715007052671521715267150070526715217152671500700007000070000700007000070000700007000070000700007000070000700007000070000700
__music__
00 3e3f3244
01 3e3f3344
00 3e3f3444
00 3e3f3544
00 3e3f3644
00 3e3f3744
00 3e3f3344
00 3e3f3844
00 3e3f3944
00 3e3f3a44
00 3e3f3b44
00 3e3f3c44
02 3e3f3d44

